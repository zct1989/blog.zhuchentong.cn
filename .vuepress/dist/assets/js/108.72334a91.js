(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{425:function(e,n,t){"use strict";t.r(n);var a=t(39),r=Object(a.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("之前说了"),t("code",[e._v("openzeppelin")]),e._v("提供了"),t("code",[e._v("Roles")]),e._v("的"),t("code",[e._v("library")]),e._v(",之外它还提供了4种角色,都是基于"),t("code",[e._v("Roles")]),e._v("的实现,基本上大同小异(我觉得除了名子其他没什么区别)")]),e._v(" "),t("ul",[t("li",[e._v("CapperRole  - 可以设置发币上限的角色")]),e._v(" "),t("li",[e._v("MinteRole - 发币角色，拥有发币的权限")]),e._v(" "),t("li",[e._v("PauserRole - 暂停角色，拥有暂停合约的功能")]),e._v(" "),t("li",[e._v("SignerRole - 不太清楚含义")])]),e._v(" "),t("p",[e._v("他们的实现都差不多，我们以"),t("code",[e._v("MinterRole")]),e._v("为例来看看:")]),e._v(" "),t("h5",{attrs:{id:"minterrole"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#minterrole"}},[e._v("#")]),e._v(" MinterRole")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("拥有发币权限的角色")]),e._v(" "),t("h5",{attrs:{id:"事件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#事件"}},[e._v("#")]),e._v(" 事件")]),e._v(" "),t("hr"),e._v(" "),t("ul",[t("li",[e._v("添加发币者")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("event MinterAdded(address indexed account)\n")])])]),t("ul",[t("li",[e._v("删除发币者")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("event MinterRemoved(address indexed account)\n")])])]),e._v(" "),t("h5",{attrs:{id:"装饰器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#装饰器"}},[e._v("#")]),e._v(" 装饰器")]),e._v(" "),t("hr"),e._v(" "),t("ul",[t("li",[e._v("仅允许发币者执行")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("modifier onlyMinter()\n")])])]),t("h5",{attrs:{id:"方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[e._v("#")]),e._v(" 方法")]),e._v(" "),t("hr"),e._v(" "),t("ul",[t("li",[e._v("是否具有发币者角色")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("function isMinter(address account) public view returns (bool)\n")])])]),t("ul",[t("li",[e._v("添加发币者角色")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("function addMinter(address account) public onlyMinter\n")])])]),t("ul",[t("li",[e._v("删除发币者角色")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("function renounceMinter() public\n")])])]),t("h5",{attrs:{id:"合约代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#合约代码"}},[e._v("#")]),e._v(" 合约代码")]),e._v(" "),t("hr"),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('pragma solidity ^0.4.24;\n\nimport "../Roles.sol";\n\ncontract MinterRole {\n  // 扩展Roles结构体\n  using Roles for Roles.Role;\n\n  // 添加账户发币者角色\n  event MinterAdded(address indexed account);\n  // 删除账户发币者角色\n  event MinterRemoved(address indexed account);\n  // 发币者角色账户列表\n  Roles.Role private minters;\n\n  /**\n   *  默认合约部署者具有发币角色\n   */\n  constructor() internal {\n    _addMinter(msg.sender);\n  }\n\n  /**\n   * 仅限发币者可以执行\n   */\n  modifier onlyMinter() {\n    require(isMinter(msg.sender));\n    _;\n  }\n\n  /**\n   * @dev 是否是发币者\n   */\n  function isMinter(address account) public view returns (bool) {\n    return minters.has(account);\n  }\n\n  /**\n   * @dev 添加发币者\n   */\n  function addMinter(address account) public onlyMinter {\n    _addMinter(account);\n  }\n\n  /**\n   * @dev 删除发币者\n   */\n  function renounceMinter() public {\n    _removeMinter(msg.sender);\n  }\n\n  function _addMinter(address account) internal {\n    minters.add(account);\n    emit MinterAdded(account);\n  }\n\n  function _removeMinter(address account) internal {\n    minters.remove(account);\n    emit MinterRemoved(account);\n  }\n}\n')])])])])}),[],!1,null,null,null);n.default=r.exports}}]);