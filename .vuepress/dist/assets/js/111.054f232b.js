(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{428:function(e,t,s){"use strict";s.r(t);var o=s(39),c=Object(o.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("很多同事在提交代码前并不注意"),s("code",[e._v("es-lint")]),e._v("/"),s("code",[e._v("ts-lint")]),e._v("的代码检测结果，已经提示警告但是依然提交了代码，结果就会给别人带来很多困扰，遇见这种情况，可以使用"),s("code",[e._v("pre-commit")]),e._v("实现在提交前对代码执行检测，如果存在问题则拒绝提交。")]),e._v(" "),s("p",[e._v("首先，安装"),s("code",[e._v("pre-commit")]),e._v(" :")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(" npm install pre-commit --save-dev\n")])])]),e._v(" "),s("p",[e._v("我使用的是"),s("code",[e._v("ts-lint")]),e._v(",所以安装后添加"),s("code",[e._v("script")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('"scripts": {\n    "lint": "tslint --project ./tsconfig.json --exclude *.js"\n    ...\n }\n')])])]),s("p",[e._v("然后就可以在"),s("code",[e._v("package.json")]),e._v("中添加"),s("code",[e._v("pre-commit")]),e._v("时需要执行的"),s("code",[e._v("script")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('"pre-commit": [\n    "lint"\n ]\n \n')])])]),s("p",[e._v("这时如果存在检测不通过的代码，则会有如下提示:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("ERROR: /src/models/user.model.ts[13, 3]: The class method 'convert' must be marked either 'private', 'public', or 'protected'\n\npre-commit:\npre-commit: We've failed to pass the specified git pre-commit hooks as the `lint`\npre-commit: hook returned an exit code (2). If you're feeling adventurous you can\npre-commit: skip the git pre-commit hooks by adding the following flags to your commit:\npre-commit:\npre-commit:   git commit -n (or --no-verify)\npre-commit:\npre-commit: This is ill-advised since the commit is broken.\npre-commit:\n")])])]),s("p",[e._v("这样就可以确保，提交的代码检测通过，也比直接修改"),s("code",[e._v(".git")]),e._v("下的"),s("code",[e._v("hooks")]),e._v("方便多了")])])}),[],!1,null,null,null);t.default=c.exports}}]);