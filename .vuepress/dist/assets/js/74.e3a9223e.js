(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{391:function(e,t,a){"use strict";a.r(t);var r=a(39),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("在开发Angular初始化相关逻辑时，使用APP_INITIALIZER令牌遇到了一些问题，主要表现为在生产模式下会提示如下错误:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ERROR TypeError: this.appInits[r] is not a function\n")])])]),a("p",[e._v("我开始也是摸不到头脑，在个人的探索下，觉得可能是因为一些细节问题引起。")]),e._v(" "),a("ul",[a("li",[e._v("不要将函数实现写到Provide内部")])]),e._v(" "),a("p",[e._v("我在开发是直接将函数实现写到了Provide内部:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("{\n          provide: APP_INITIALIZER,\n          useFactory: functon(){ return () => startUpFactory.load() },\n          deps: [StartupService],\n          multi: true\n        }\n")])])]),e._v(" "),a("p",[e._v("在我将函数实现移至"),a("code",[e._v("CoreModule")]),e._v("外部后，错误提示没有再出现，我觉的这个可能是引起问题的原因")]),e._v(" "),a("p",[e._v("另外还有一些操作会出现报错")]),e._v(" "),a("ul",[a("li",[e._v("不要在Provide内部使用lambda表达式")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("  useFactory:() => () => startUpFactory.load()\n")])])]),a("p",[e._v("我开始直接在Provide内部书写lambda表达式，直接报了无法解析表达式的错误")]),e._v(" "),a("ul",[a("li",[e._v("不要将"),a("code",[e._v("useFactory")]),e._v("函数作为"),a("code",[e._v("CoreModule")]),e._v("的静态方法")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("  useFactory: this.startUpFactory\n")])])]),a("p",[e._v("我也尝试过使用CoreModule的静态方法作为"),a("code",[e._v("useFactory")]),e._v(", 也会提示相关错误")]),e._v(" "),a("p",[e._v("所以需要使用"),a("code",[e._v("const")]),e._v("在"),a("code",[e._v("CoreModule")]),e._v("之外定义"),a("code",[e._v("userFactory")]),e._v("，以上是对遇到的问题的一些总结，避免下次遇到又会忘记。")])])}),[],!1,null,null,null);t.default=s.exports}}]);